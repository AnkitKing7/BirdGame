<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <title>Multi-Neon Flappy 2027 - Ankit Kumar Ex</title>
    <style>
        :root {
            --neon: #00f3ff;
            --bg-color: #020202;
        }
        body { 
            margin: 0; 
            overflow: hidden; 
            background: var(--bg-color); 
            display: flex; 
            flex-direction: column; 
            justify-content: center; 
            align-items: center; 
            height: 100vh; 
            font-family: 'Orbitron', 'Segoe UI', sans-serif; 
        }
        #game-container { position: relative; border-radius: 20px; overflow: hidden; box-shadow: 0 0 50px rgba(0,0,0,1); border: 2px solid var(--neon); }
        canvas { background: #050505; display: block; }
        
        /* Glassmorphism UI */
        #ui-overlay {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            display: flex; flex-direction: column;
            justify-content: center; align-items: center;
            background: rgba(0,0,0,0.85);
            backdrop-filter: blur(10px);
            z-index: 10;
        }
        .main-title {
            color: var(--neon);
            font-size: 38px;
            text-shadow: 0 0 20px var(--neon);
            margin-bottom: 20px;
            font-weight: 900;
            letter-spacing: 4px;
            text-align: center;
        }
        .btn-group { display: flex; flex-direction: column; gap: 10px; width: 220px; }
        .neon-btn {
            width: 100%;
            padding: 12px;
            background: transparent;
            color: white;
            border: 2px solid var(--neon);
            border-radius: 5px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            text-transform: uppercase;
            transition: 0.3s;
            box-shadow: inset 0 0 5px var(--neon), 0 0 5px var(--neon);
        }
        .neon-btn:hover {
            background: var(--neon);
            color: black;
            box-shadow: 0 0 25px var(--neon);
        }

        #stats-bar {
            position: absolute; top: 20px; width: 100%;
            display: flex; justify-content: space-around;
            color: white; font-size: 18px; font-weight: bold;
            text-shadow: 0 0 10px var(--neon);
            pointer-events: none; z-index: 5;
        }
        #footer {
            margin-top: 20px;
            color: var(--neon);
            font-size: 12px;
            letter-spacing: 5px;
            font-weight: bold;
            text-transform: uppercase;
            opacity: 0.7;
        }
    </style>
    <!-- Modern Font for 2027 look -->
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;900&display=swap" rel="stylesheet">
</head>
<body>

    <div id="game-container">
        <div id="stats-bar">
            <span id="scoreVal">SCORE: 0</span>
            <span id="coinVal" style="color: #ffdd00;">COINS: 0</span>
        </div>

        <div id="ui-overlay">
            <div class="main-title" id="menuTitle">NEON FLAPPY<br><span style="font-size: 15px; letter-spacing: 2px; color: #fff;">2027 EDITION</span></div>
            <div class="btn-group">
                <button class="neon-btn" onclick="initGame()">START MISSION</button>
                <button class="neon-btn" onclick="nextTheme()" style="animation: pulse 2s infinite;">CHANGE THEME</button>
                <button class="neon-btn" style="opacity: 0.6; border-style: dashed;" onclick="alert('Ankit Kumar Ex. Pro-Version Unlocked!')">RANKING</button>
            </div>
        </div>

        <canvas id="canvas"></canvas>
    </div>

    <div id="footer">Made by Ankit Kumar Ex.</div>

<script>
    const canvas = document.getElementById("canvas");
    const ctx = canvas.getContext("2d");
    const ui = document.getElementById("ui-overlay");

    canvas.width = 400;
    canvas.height = 600;

    // Theme System
    const themes = [
        { name: "Cyber Blue", color: "#00f3ff" },
        { name: "Neon Pink", color: "#ff007f" },
        { name: "Toxic Green", color: "#39ff14" },
        { name: "Solar Gold", color: "#ffdd00" },
        { name: "Deep Purple", color: "#bc13fe" },
        { name: "Ghost White", color: "#ffffff" }
    ];
    let themeIndex = 0;
    let themeColor = themes[0].color;

    function nextTheme() {
        themeIndex = (themeIndex + 1) % themes.length;
        themeColor = themes[themeIndex].color;
        document.documentElement.style.setProperty('--neon', themeColor);
        document.getElementById('menuTitle').style.textShadow = `0 0 20px ${themeColor}`;
        console.log("Theme Switched to: " + themes[themeIndex].name);
    }

    let score = 0;
    let coins = 0;
    let gameActive = false;
    let pipes = [];
    let coinObjects = [];
    let frame = 0;

    const bird = {
        x: 80, y: 300, w: 40, h: 30, velocity: 0, gravity: 0.24, lift: -5.2
    };

    function initGame() {
        ui.style.display = "none";
        score = 0; coins = 0; pipes = []; coinObjects = [];
        bird.y = 300; bird.velocity = 0;
        gameActive = true;
    }

    function drawBird() {
        ctx.save();
        ctx.translate(bird.x, bird.y);
        ctx.rotate(bird.velocity * 0.06);
        
        ctx.shadowBlur = 20;
        ctx.shadowColor = themeColor;

        // Futuristic Bird Shape
        ctx.fillStyle = "#000";
        ctx.strokeStyle = themeColor;
        ctx.lineWidth = 3;
        
        ctx.beginPath();
        ctx.moveTo(-20, -10);
        ctx.lineTo(15, -15);
        ctx.lineTo(25, 0); // Beak tip
        ctx.lineTo(15, 15);
        ctx.lineTo(-20, 10);
        ctx.closePath();
        ctx.fill();
        ctx.stroke();

        // Eye Glow
        ctx.fillStyle = themeColor;
        ctx.beginPath(); ctx.arc(8, -4, 3, 0, Math.PI*2); ctx.fill();

        ctx.restore();
    }

    function update() {
        if (!gameActive) return;

        bird.velocity += bird.gravity;
        bird.y += bird.velocity;

        // Pipe Generation
        if (frame % 95 === 0) {
            let gap = 170;
            let topH = Math.random() * (canvas.height - gap - 120) + 60;
            pipes.push({ x: canvas.width, y: topH, gap: gap });
            
            if(Math.random() > 0.5) {
                coinObjects.push({ x: canvas.width + 100, y: topH + gap/2 });
            }
        }

        pipes.forEach((p, i) => {
            p.x -= 3.2;
            
            ctx.shadowBlur = 15;
            ctx.shadowColor = themeColor;
            ctx.strokeStyle = themeColor;
            ctx.lineWidth = 4;
            
            // Draw Neon Pipes with rounded corners
            ctx.strokeRect(p.x, -10, 55, p.y + 10);
            ctx.strokeRect(p.x, p.y + p.gap, 55, canvas.height - p.y - p.gap + 10);

            // Collision
            if (bird.x + 15 > p.x && bird.x - 15 < p.x + 55 && (bird.y - 12 < p.y || bird.y + 12 > p.y + p.gap)) {
                gameOver();
            }
            if (p.x < bird.x && !p.scored) { score++; p.scored = true; }
            if (p.x < -100) pipes.splice(i, 1);
        });

        // Coin Logic
        coinObjects.forEach((c, i) => {
            c.x -= 3.2;
            ctx.shadowBlur = 15; ctx.shadowColor = "#ffdd00";
            ctx.fillStyle = "#ffdd00";
            ctx.beginPath();
            ctx.arc(c.x, c.y, 8, 0, Math.PI*2);
            ctx.fill();
            
            if(Math.hypot(bird.x - c.x, bird.y - c.y) < 30) {
                coins += 5; // One coin gives 5 bonus
                coinObjects.splice(i, 1);
            }
            if(c.x < -20) coinObjects.splice(i, 1);
        });

        if (bird.y > canvas.height || bird.y < 0) gameOver();

        document.getElementById("scoreVal").innerText = `SCORE: ${score}`;
        document.getElementById("coinVal").innerText = `COINS: ${coins}`;
    }

    function render() {
        ctx.fillStyle = "#050505";
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        
        // Background Matrix Grid
        ctx.strokeStyle = themeColor;
        ctx.globalAlpha = 0.1;
        for(let i=0; i<canvas.width; i+=50) {
            ctx.beginPath(); ctx.moveTo(i + (frame%50), 0); ctx.lineTo(i + (frame%50), canvas.height); ctx.stroke();
        }
        ctx.globalAlpha = 1.0;

        drawBird();
        update();
        frame++;
        requestAnimationFrame(render);
    }

    function gameOver() {
        gameActive = false;
        ui.style.display = "flex";
        document.getElementById('menuTitle').innerHTML = "<span style='color:red'>CORE CRITICAL</span><br><span style='font-size:14px; color:white'>SYSTEM REBOOT REQUIRED</span>";
    }

    function jump() { if(gameActive) bird.velocity = bird.lift; }
    window.onkeydown = (e) => { if(e.code === "Space" || e.code === "ArrowUp") jump(); };
    canvas.ontouchstart = (e) => { e.preventDefault(); jump(); };
    canvas.onmousedown = (e) => { if(gameActive) jump(); };

    render();
</script>
</body>
</html>
